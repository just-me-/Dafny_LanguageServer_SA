image: microsoft/dotnet:latest

stages:
  - build
  - test

variables:
  project: "Dafny_Server_Redesign"
  repo: "dafny-server-redesign"
  build_path: "$project/"
  project_path: "Dafny_Server_Redesign/"

before_script:
  - apt-get update -qq && apt-get install -y -qq sshpass
  - "echo \"before script...\""
  - "ls -al"
  - "cd $build_path"
  - "ls -al"
  - "dotnet restore"

build:
  stage: build
  script:
    - "ls -al"
    - "echo \"building stage...\""
    - "cd $build_path"
    - "ls -al"
    - "dotnet build"

test:
  stage: test
  script:
    - dotnet test